# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ì–ª–∞–≤—ã 8 - –§–æ—Ä–º–∞—Ç Dialogue

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –≥–ª–∞–≤—É 8 –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
TypeError: sceneData.dialogue.some is not a function
```

## –ü—Ä–∏—á–∏–Ω–∞
–í —Å—Ü–µ–Ω–∞—Ö –≥–ª–∞–≤—ã 8 –ø–æ–ª–µ `dialogue` –±—ã–ª–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ –æ–±—ä–µ–∫—Ç, –∞ –Ω–µ –º–∞—Å—Å–∏–≤:
```json
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
"dialogue": {
  "speaker": "anastasia",
  "text": "–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–¥–∞..."
}

// –ü–†–ê–í–ò–õ–¨–ù–û
"dialogue": [
  {
    "speaker": "anastasia",
    "text": "–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–¥–∞...",
    "emotion": "smile1"
  }
]
```

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω —Å–∫—Ä–∏–ø—Ç `fix_chapter8_dialogue.js`, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ä–º–∞—Ç `dialogue` –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ö –≥–ª–∞–≤—ã 8 (150-170)
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª –æ–±—ä–µ–∫—Ç—ã –≤ –º–∞—Å—Å–∏–≤—ã
- ‚úÖ –î–æ–±–∞–≤–∏–ª –ø–æ–ª–µ `emotion` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏–ª –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã
–í—Å–µ —Å—Ü–µ–Ω—ã –≥–ª–∞–≤—ã 8 —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
- **scene150** - scene170 (21 —Å—Ü–µ–Ω–∞)
- –ö–∞–∂–¥–∞—è —Å—Ü–µ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –¥–∏–∞–ª–æ–≥–æ–≤
- –ö–∞–∂–¥—ã–π –¥–∏–∞–ª–æ–≥ –∏–º–µ–µ—Ç –ø–æ–ª—è: `speaker`, `text`, `emotion`

### 3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π
–¢–µ–ø–µ—Ä—å —Å—Ü–µ–Ω—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å:
- ‚úÖ `SceneManager.processSceneCharacters()`
- ‚úÖ `SceneManager.processScene()`
- ‚úÖ –°–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–æ–π –¥–∏–∞–ª–æ–≥–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```json
{
  "dialogue": {
    "speaker": "anastasia",
    "text": "–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–¥–∞..."
  }
}
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```json
{
  "dialogue": [
    {
      "speaker": "anastasia",
      "text": "–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–¥–∞...",
      "emotion": "smile1"
    }
  ]
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test_chapter8_fix.html`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ dialogue –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ö
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (speaker, text)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –ø–æ–ª—è emotion
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤—ã 8
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π

## –°—Ç–∞—Ç—É—Å
üü¢ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ** - –ì–ª–∞–≤–∞ 8 —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –≤ –≥–ª–∞–≤—É 8 –≤ –∏–≥—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤
3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω (171-200) 