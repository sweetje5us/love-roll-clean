# Исправление проблемы с инициализацией отношений

## Проблема
Отношения с Димой инициализировались со значением 50 вместо 0:
- В конфигурации главы 3 было установлено начальное значение `"dima": 50`
- Инициализация отношений происходила несколько раз
- Состояние React не обновлялось правильно
- В результате система не накапливала изменения отношений

## Причина
1. **Начальное значение в конфигурации главы 3**: `"dima": 50` в `chapter3/config.json`
2. **Множественная инициализация**: `initializeRelationships` вызывался несколько раз
3. **Проблемы с состоянием React**: состояние не обновлялось синхронно

## Исправления

### 1. Убрано начальное значение из конфигурации главы 3
**Файл**: `public/episodes/tutorial/chapters/chapter3/config.json`
```json
// БЫЛО:
"rewards": {
  "experience": 150,
  "coins": 75,
  "relationship": {
    "dima": 50
  }
}

// СТАЛО:
"rewards": {
  "experience": 150,
  "coins": 75
}
```

### 2. Добавлена защита от множественной инициализации
**Файл**: `src/contexts/RelationshipsContext.js`
```javascript
// Если уже есть отношения для этого эпизода, не инициализируем повторно
if (hasExistingRelationships) {
  console.log('initializeRelationships - отношения уже инициализированы для этого эпизода, пропускаем');
  return;
}
```

### 3. Упрощена логика getRelationship
**Файл**: `src/contexts/RelationshipsContext.js`
- Убрана сложная логика поиска по частичным совпадениям
- Упрощена логика чтения из localStorage
- Убрана логика поиска обратных отношений

## Результат
- Отношения теперь инициализируются с 0
- Инициализация происходит только один раз
- Система правильно накапливает изменения отношений
- Убрана избыточная сложность в коде

## Тестирование
После исправлений:
1. Очистите все сохранения
2. Начните главу 3 с самого начала
3. Проверьте, что отношения с Димой начинаются с 0
4. Проверьте, что изменения отношений накапливаются правильно 