# –ú–µ—Ö–∞–Ω–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª–µ

## –û–±–∑–æ—Ä

–í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–ø—ã—Ç–∞:

1. **–°–∏—Å—Ç–µ–º–∞ –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤** - –≤—ã–±–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Å—é–∂–µ—Ç –∏ –∫–æ–Ω—Ü–æ–≤–∫–∏
2. **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
3. **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö** - –¥–∞—Ä–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
4. **–°–∏—Å—Ç–µ–º–∞ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —á–µ—Ä–µ–∑ –±—Ä–æ—Å–∫–∏ d20
5. **–°–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–æ–º—Ü–µ–≤** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–µ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
6. **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–º–æ—Ü–∏–π** - –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
7. **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –¥–ª—è –∏–≥—Ä–æ–∫–∞

## 1. –°–∏—Å—Ç–µ–º–∞ –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—Ç–≤—è—â–∏–µ—Å—è —Å—é–∂–µ—Ç—ã, –≥–¥–µ —Ä–µ—à–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ü–æ–≤–∫–∏.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–í–∞–∂–Ω—ã–µ –≤—ã–±–æ—Ä—ã** –ø–æ–º–µ—á–∞—é—Ç—Å—è —Ñ–ª–∞–≥–æ–º `important: true` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω—ã
- –ö–∞–∂–¥—ã–π –≤–∞–∂–Ω—ã–π –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–≤—Ä–µ–º—è, –≥–ª–∞–≤–∞, —Å—Ü–µ–Ω–∞)
- –í—ã–±–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ü–µ–Ω–∞—Ö
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤—ã–±–æ—Ä–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞–∂–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
```json
{
  "id": "moral_choice",
  "text": "–ß—Ç–æ –≤—ã –≤—ã–±–µ—Ä–µ—Ç–µ?",
  "important": true,
  "value": "good",
  "description": "–í—ã–±–æ—Ä –º–µ–∂–¥—É –¥–æ–±—Ä–æ–º –∏ –∑–ª–æ–º",
  "consequences": ["–í–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω—Ü–æ–≤–∫—É", "–ò–∑–º–µ–Ω—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è"]
}
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–∞–∂–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- **–¢–µ–∫—Å—Ç**: "*–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞* —ç—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç"
- **–ò–∫–æ–Ω–∫–∞**: ‚≠ê (–∑–≤–µ–∑–¥–∞)
- **–¶–≤–µ—Ç**: –ñ–µ–ª—Ç—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ü–µ–Ω–∞—Ö
```json
{
  "requirements": {
    "importantChoice": {
      "moral_choice": "good"
    }
  }
}
```

## 2. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–æ–≤, –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∫–æ–Ω—Ü–æ–≤–æ–∫. –û—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –∏–≥—Ä—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏.

### –£—Ä–æ–≤–Ω–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—É—é —à–∫–∞–ª—É –æ—Ç -100 –¥–æ 160:

- **–í—Ä–∞–∂–¥–∞** (-100 –¥–æ -60): –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç (#dc143c)
- **–ù–µ–ø—Ä–∏—è–∑–Ω—å** (-59 –¥–æ -20): –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç (#ff6347)
- **–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ** (-19 –¥–æ 19): –°–µ—Ä—ã–π —Ü–≤–µ—Ç (#808080)
- **–î—Ä—É–∂–±–∞** (20 –¥–æ 59): –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç (#32cd32)
- **–ë–ª–∏–∑–∫–∞—è –¥—Ä—É–∂–±–∞** (60 –¥–æ 100): –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç (#228b22)
- **–°–∏–º–ø–∞—Ç–∏—è** (101 –¥–æ 120): –†–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç (#ff69b4) - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ä–æ–º–∞–Ω—Ç–∏–∫–∞
- **–õ—é–±–æ–≤—å** (121 –¥–æ 140): –Ø—Ä–∫–æ-—Ä–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç (#ff1493) - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ä–æ–º–∞–Ω—Ç–∏–∫–∞
- **–°—Ç—Ä–∞—Å—Ç—å** (141 –¥–æ 160): –¢–µ–º–Ω–æ-—Ä–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç (#ff0066) - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ä–æ–º–∞–Ω—Ç–∏–∫–∞

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π
–û—Ç–Ω–æ—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —ç–ø–∏–∑–æ–¥–∞:
- **–ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: 0 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è)
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
–û—Ç–Ω–æ—à–µ–Ω–∏—è –∏–∑–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–±–æ—Ä–æ–≤ –∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```json
{
  "effects": {
    "relationship": {
      "dima": 15,
      "anna": -10
    }
  }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è:**
- –ö–∞–∂–¥—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è: +10, +8, +12, +15, +5, +25 = 75
- –ó–Ω–∞—á–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –æ—Ç -100 –¥–æ 160
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤ localStorage

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ**: "*–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞* —ç—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å" (–∑–µ–ª–µ–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ)
- **–£–º–µ–Ω—å—à–µ–Ω–∏–µ**: "*–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞* —ç—Ç–æ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å" (—Ä–∞–∑–±–∏—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ)

### –ë–µ–π–¥–∂ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ö–Ω–æ–ø–∫–∞ "–û—Ç–Ω–æ—à–µ–Ω–∏—è" –ø–æ–ª—É—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö
```json
{
  "requirements": {
    "relationship": {
      "dima": 50,
      "anna": 20
    }
  }
}
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã
- `src/contexts/RelationshipsContext.js` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
- `src/utils/episodeManager.js` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º —ç–ø–∏–∑–æ–¥–æ–≤

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**`initializeRelationships(episodeId, characters, playerCharacterId, chapterConfig)`**
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è —ç–ø–∏–∑–æ–¥–∞:
- –°–æ–∑–¥–∞–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ 0)
- –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**`changeRelationship(characterId, targetId, type, change)`**
–ò–∑–º–µ–Ω—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
- –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `getRelationship`
- –í—ã—á–∏—Å–ª—è–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: `currentValue + change`
- –í—ã–∑—ã–≤–∞–µ—Ç `updateRelationship` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**`updateRelationship(characterId, targetId, type, value)`**
–û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ React —á–µ—Ä–µ–∑ `dispatch`
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ localStorage
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç -100 –¥–æ 160

**`getRelationship(characterId, targetId, type)`**
–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è:
- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ React
- –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤ localStorage –∫–∞–∫ fallback
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 –µ—Å–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏**
- **–ë—ã–ª–æ**: –≠—Ñ—Ñ–µ–∫—Ç—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –¥–≤–∞–∂–¥—ã –≤ `episodeManager.js`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `case 'relationships'`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–∞–∂–¥—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
- **–ë—ã–ª–æ**: –û—Ç–Ω–æ—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 50 –¥–ª—è –î–∏–º—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –£–±—Ä–∞–Ω–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤—ã 3
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
- **–ë—ã–ª–æ**: `initializeRelationships` –≤—ã–∑—ã–≤–∞–ª—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

**–ü—Ä–æ–±–ª–µ–º–∞ 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**
- **–ë—ã–ª–æ**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ —á–µ—Ä–µ–∑ `useEffect` –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `updateRelationship`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## 3. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º –¥–∞—Ä–∏—Ç—å –∏ –ø—Ä–æ—Å–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã —É –∏–≥—Ä–æ–∫–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π. –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–≥—É—Ç –¥–∞—Ä–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–≥—Ä–æ–∫—É –ø–æ —Ä–∞–∑–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º:
- –í –∑–Ω–∞–∫ –¥—Ä—É–∂–±—ã
- –ó–∞ –ø–æ–º–æ—â—å
- –ö–∞–∫ –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –≤–∞–∂–Ω—ã–µ –≤—ã–±–æ—Ä—ã
- –ü—Ä–æ—Å—Ç–æ —Ç–∞–∫

**–ü—Ä–∏–º–µ—Ä –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
```json
{
  "choices": [
    {
      "text": "–ü—Ä–∏–Ω—è—Ç—å –ø–æ–¥–∞—Ä–æ–∫",
      "nextScene": "scene79",
      "effects": {
        "items": {
          "add": ["present"]
        },
        "relationships": {
          "arseniy": 5
        }
      }
    }
  ]
}
```

#### –î–∞—Ä–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º
–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã —É –∏–≥—Ä–æ–∫–∞. –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –Ω–µ—Ç –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞, –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º.

**–ü—Ä–∏–º–µ—Ä –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
```json
{
  "choices": [
    {
      "text": "–î–∞—Ç—å —è–±–ª–æ–∫–æ",
      "nextScene": "scene81",
      "requiredItem": "apple",
      "effects": {
        "items": {
          "remove": ["apple"]
        },
        "relationships": {
          "arseniy": 8
        }
      }
    },
    {
      "text": "–ò–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è –Ω–µ—Ç —è–±–ª–æ–∫–∞",
      "nextScene": "scene82",
      "effects": {
        "relationships": {
          "arseniy": 0
        }
      }
    }
  ]
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–æ–≤

#### –¢—Ä–µ–±—É–µ–º—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
–í—ã–±–æ—Ä—ã —Å `requiredItem` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ:

```json
{
  "id": "give_apple",
  "text": "–î–∞—Ç—å —è–±–ª–æ–∫–æ",
  "requiredItem": "apple",
  "effects": {
    "items": {
      "remove": ["apple"]
    }
  }
}
```

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç ‚Üí –≤—ã–±–æ—Ä –∞–∫—Ç–∏–≤–µ–Ω
- –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞ ‚Üí –≤—ã–±–æ—Ä –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä—ã–º)
- –ü—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º –≤—ã–±–æ—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç: "(—Ç—Ä–µ–±—É–µ—Ç—Å—è: –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞)"

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:

1. **–ü—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç**: `{ itemId: number }`
2. **–°–ª–æ–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**: `{ itemId: { quantity: number, lastAdded: string } }`

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥–º–µ—Ç–∞—Ö

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- **–¢–µ–∫—Å—Ç**: "–ü–æ–ª—É—á–µ–Ω –ø—Ä–µ–¥–º–µ—Ç [–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞]"
- **–ò–∫–æ–Ω–∫–∞**: üéÅ (–ø–æ–¥–∞—Ä–æ–∫)
- **–¶–≤–µ—Ç**: –ó–µ–ª–µ–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
- **–¢–∏–ø**: `item_received`

#### –ò–∑—ä—è—Ç–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
–ü—Ä–∏ –∏–∑—ä—è—Ç–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- **–¢–µ–∫—Å—Ç**: "–ò–∑—ä—è—Ç –ø—Ä–µ–¥–º–µ—Ç [–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞]"
- **–ò–∫–æ–Ω–∫–∞**: ‚ùå (–º–∏–Ω—É—Å)
- **–¶–≤–µ—Ç**: –°–µ—Ä—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
- **–¢–∏–ø**: `item_removed`

### –ë–µ–π–¥–∂ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
–ö–Ω–æ–ø–∫–∞ "–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å" –ø–æ–ª—É—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ —Å –∏–∫–æ–Ω–∫–æ–π –ø–æ–¥–∞—Ä–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –ë–µ–π–¥–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π

#### –í–ª–∏—è–Ω–∏–µ –Ω–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
–î–∞—Ä–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏—è:

```json
{
  "effects": {
    "items": {
      "add": ["present"]
    },
    "relationships": {
      "arseniy": 5  // +5 –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º –∑–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
    }
  }
}
```

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:

```json
{
  "choices": [
    {
      "text": "–ö–æ–Ω–µ—á–Ω–æ! –ß—Ç–æ —Ç—ã –º–æ–∂–µ—à—å –ø–æ–¥–∞—Ä–∏—Ç—å?",
      "nextScene": "scene89",
      "requiredRelationship": {
        "arseniy": "friendship"  // –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –¥—Ä—É–∂–±—ã
      }
    }
  ]
}
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã
- `src/utils/dialogueItemSystem.js` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- `src/utils/episodeManager.js` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º —ç–ø–∏–∑–æ–¥–æ–≤
- `src/components/screens/GameScreen.js` - UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–±–æ—Ä–æ–≤

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**`isChoiceAvailable(choice, inventory)`**
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ–±—É–µ–º—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
```javascript
export function isChoiceAvailable(choice, inventory) {
  if (choice.requiredItem) {
    const itemData = inventory[choice.requiredItem];
    
    if (typeof itemData === 'number') {
      return itemData > 0;
    } else if (itemData && typeof itemData === 'object' && itemData.quantity !== undefined) {
      return itemData.quantity > 0;
    }
    return false;
  }
  return true;
}
```

**`processItemEffects(itemEffects, inventory, showNotification)`**
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
```javascript
function processItemEffects(itemEffects, inventory, showNotification) {
  const newInventory = { ...inventory };

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
  if (itemEffects.add) {
    const itemsToAdd = Array.isArray(itemEffects.add) ? itemEffects.add : [itemEffects.add];
    itemsToAdd.forEach(itemId => {
      if (!newInventory[itemId]) {
        newInventory[itemId] = { quantity: 0, lastAdded: new Date().toISOString() };
      }
      newInventory[itemId].quantity++;
      
      if (showNotification) {
        const itemName = getItemName(itemId);
        showNotification(`–ü–æ–ª—É—á–µ–Ω –ø—Ä–µ–¥–º–µ—Ç "${itemName}"`, 'success');
      }
    });
  }

  // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
  if (itemEffects.remove) {
    const itemsToRemove = Array.isArray(itemEffects.remove) ? itemEffects.remove : [itemEffects.remove];
    itemsToRemove.forEach(itemId => {
      if (newInventory[itemId] && newInventory[itemId].quantity > 0) {
        newInventory[itemId].quantity--;
        if (newInventory[itemId].quantity === 0) {
          delete newInventory[itemId];
        }
        
        if (showNotification) {
          const itemName = getItemName(itemId);
          showNotification(`–ò–∑—ä—è—Ç –ø—Ä–µ–¥–º–µ—Ç "${itemName}"`, 'info');
        }
      }
    });
  }

  return newInventory;
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å `InventoryContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∏–≥—Ä–æ–∫–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏/–∏–∑—ä—è—Ç–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –±–µ–π–¥–∂–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –û—Ç–Ω–æ—à–µ–Ω–∏—è
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `RelationshipsContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏:
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –ø—Ä–∏ –¥–∞—Ä–µ–Ω–∏–∏/–ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é –æ—Ç–Ω–æ—à–µ–Ω–∏–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–µ–¥–º–µ—Ç–∞–º

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å `NotificationContext` –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–µ–¥–º–µ—Ç–∞—Ö:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏/–∏–∑—ä—è—Ç–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ë–µ–π–¥–∂ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞ —Å –¥–∞—Ä–µ–Ω–∏–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞
```json
{
  "id": "scene77",
  "chapterId": 5,
  "dialogue": [
    {
      "speaker": "arseniy",
      "text": "–í–æ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —è —Ö–æ—á—É –ø–æ–¥–∞—Ä–∏—Ç—å —Ç–µ–±–µ –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ–¥–∞—Ä–æ–∫ –≤ –∑–Ω–∞–∫ –Ω–∞—à–µ–≥–æ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞!",
      "emotion": "delighted"
    }
  ],
  "choices": [
    {
      "text": "–ü—Ä–∏–Ω—è—Ç—å –ø–æ–¥–∞—Ä–æ–∫",
      "nextScene": "scene79",
      "effects": {
        "items": {
          "add": ["present"]
        },
        "relationships": {
          "arseniy": 5
        }
      }
    }
  ]
}
```

#### –°—Ü–µ–Ω–∞ —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø—Ä–µ–¥–º–µ—Ç–∞
```json
{
  "id": "scene78",
  "chapterId": 5,
  "dialogue": [
    {
      "speaker": "arseniy",
      "text": "–ö—Å—Ç–∞—Ç–∏, —É –º–µ–Ω—è –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è –ø—Ä–æ—Å—å–±–∞... –ú–æ–∂–µ—à—å –ª–∏ —Ç—ã –¥–∞—Ç—å –º–Ω–µ —è–±–ª–æ–∫–æ?",
      "emotion": "normal"
    }
  ],
  "choices": [
    {
      "text": "–î–∞—Ç—å —è–±–ª–æ–∫–æ",
      "nextScene": "scene81",
      "requiredItem": "apple",
      "effects": {
        "items": {
          "remove": ["apple"]
        },
        "relationships": {
          "arseniy": 8
        }
      }
    },
    {
      "text": "–ò–∑–≤–∏–Ω–∏, —É –º–µ–Ω—è –Ω–µ—Ç —è–±–ª–æ–∫–∞",
      "nextScene": "scene82",
      "effects": {
        "relationships": {
          "arseniy": 0
        }
      }
    }
  ]
}
```

#### –°—Ü–µ–Ω–∞ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º –æ—Ç–Ω–æ—à–µ–Ω–∏–π
```json
{
  "id": "scene89",
  "chapterId": 5,
  "dialogue": [
    {
      "speaker": "arseniy",
      "text": "–£ –º–µ–Ω—è –µ—Å—Ç—å —Ñ–µ—è. –≠—Ç–æ –æ—á–µ–Ω—å —Ü–µ–Ω–Ω—ã–π –ø–∏—Ç–æ–º–µ—Ü, –∫–æ—Ç–æ—Ä–æ–≥–æ —è –¥–∞—Ä—é —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–æ—è—â–∏–º –¥—Ä—É–∑—å—è–º.",
      "emotion": "delighted"
    }
  ],
  "choices": [
    {
      "text": "–ü—Ä–∏–Ω—è—Ç—å —Ñ–µ—é",
      "nextScene": "scene90",
      "requiredRelationship": {
        "arseniy": "friendship"
      },
      "effects": {
        "items": {
          "add": ["fairy"]
        },
        "relationships": {
          "arseniy": 20
        }
      }
    }
  ]
}
```

### –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–æ–≤
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:', window.getInventory());
console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∞:', isChoiceAvailable(choice, inventory));
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```javascript
// –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞
window.addNotification('item_received', {
  message: '–ü–æ–ª—É—á–µ–Ω –ø—Ä–µ–¥–º–µ—Ç "–ü–æ–¥–∞—Ä–æ–∫"',
  itemName: '–ü–æ–¥–∞—Ä–æ–∫'
});

// –¢–µ—Å—Ç –∏–∑—ä—è—Ç–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞
window.addNotification('item_removed', {
  message: '–ò–∑—ä—è—Ç –ø—Ä–µ–¥–º–µ—Ç "–Ø–±–ª–æ–∫–æ"',
  itemName: '–Ø–±–ª–æ–∫–æ'
});
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–π–¥–∂–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- –ë–µ–π–¥–∂ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ë–µ–π–¥–∂ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- –ë–µ–π–¥–∂ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑—ä—è—Ç–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### –î–∏–∑–∞–π–Ω –≤—ã–±–æ—Ä–æ–≤
1. **–í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É** - –µ—Å–ª–∏ –µ—Å—Ç—å –≤—ã–±–æ—Ä —Å `requiredItem`, –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–±–æ—Ä –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤** - –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è
3. **–ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã** - –±–æ–ª–µ–µ —Ü–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—é–∂–µ—Ç–æ–º
1. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤** - –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Å–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Å–º—ã—Å–ª –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
2. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π** - –±–æ–ª–µ–µ —Ü–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö
3. **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã–±–æ—Ä–æ–≤** - –æ—Ç–∫–∞–∑ –¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã
1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `items.json`
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏** - —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—É—Å—Ç–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `add` –∏ `remove` –æ–ø–µ—Ä–∞—Ü–∏–π

## 4. –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —á–µ—Ä–µ–∑ –±—Ä–æ—Å–∫–∏ d20. –≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–∏ –∏ –≤—ã–±–æ—Ä—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–•–∞—Ä–∏–∑–º–∞** - —É–±–µ–∂–¥–µ–Ω–∏–µ, —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- **–•–æ–ª–æ–¥** - –∑–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å —ç–º–æ—Ü–∏–π
- **–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π, —ç–º–ø–∞—Ç–∏—è
- **–ö–æ–≤–∞—Ä—Å—Ç–≤–æ** - –æ–±–º–∞–Ω, —Ö–∏—Ç—Ä–æ—Å—Ç—å
- **–†–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Å–∏–ª–∞ –≤–æ–ª–∏, –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç** - –∞–Ω–∞–ª–∏–∑, —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞
1. **–í—ã–±–æ—Ä —Å —Ç–µ–≥–æ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** - –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è —Ç–µ–≥–æ–º `[–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞]`
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±—Ä–æ—Å–æ–∫ d20 + –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
4. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** - —É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏
```json
{
  "choices": [
    {
      "text": "[–•–∞—Ä–∏–∑–º–∞] –£–±–µ–¥–∏—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞ –¥–∞—Ç—å —Å–∫–∏–¥–∫—É",
      "diceCheck": {
        "stat": "charisma",
        "difficulty": 15,
        "description": "–£–±–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–∞ –¥–∞—Ç—å —Å–∫–∏–¥–∫—É",
        "results": {
          "critical_success": "scene_critical_success",
          "success": "scene_success",
          "failure": "scene_failure"
        }
      }
    },
    {
      "text": "[–ö–æ–≤–∞—Ä—Å—Ç–≤–æ] –û–±–º–∞–Ω—É—Ç—å –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞",
      "diceCheck": {
        "stat": "cunning",
        "difficulty": 18,
        "description": "–û–±–º–∞–Ω –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞",
        "results": {
          "critical_success": "scene_critical_success",
          "success": "scene_success",
          "failure": "scene_failure"
        }
      }
    }
  ]
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—Ä–æ—Å–∫–æ–≤

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Å–ø–µ—Ö (–±—Ä–æ—Å–æ–∫ 20)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ–≥–¥–∞ —É—Å–ø–µ—Ö, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –≤ –¥–µ–π—Å—Ç–≤–∏–∏
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã, –æ—Å–æ–±—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –û–±—ã—á–Ω—ã–π —É—Å–ø–µ—Ö (—Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚â• —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –û–±—ã—á–Ω–∞—è –Ω–µ—É–¥–∞—á–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç < —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –≤–æ–∑–º–æ–∂–Ω—ã–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ—É–¥–∞—á–∞ (–±—Ä–æ—Å–æ–∫ 1)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ–≥–¥–∞ –Ω–µ—É–¥–∞—á–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≤–∞–ª –¥–µ–π—Å—Ç–≤–∏—è
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è, —É—Ö—É–¥—à–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –ë–æ–Ω—É—Å—ã –æ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤

#### –ë–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
–ü–∏—Ç–æ–º—Ü—ã –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º:
```json
{
  "special": {
    "type": "stat",
    "stat_type": "charisma",
    "bonus": 2
  }
}
```

#### –ë–æ–Ω—É—Å—ã –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –±—Ä–æ—Å–∫–∞
–ü–∏—Ç–æ–º—Ü—ã –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –±–æ–Ω—É—Å—ã –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –±—Ä–æ—Å–∫–∞:
```json
{
  "special": {
    "type": "cube",
    "modificator": 2
  }
}
```

#### –ü–µ—Ä–µ–±—Ä–æ—Å –∫—É–±–∏–∫–∞
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∏—Ç–æ–º—Ü—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```json
{
  "special": {
    "type": "reroll",
    "count": 1
  }
}
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã
- `src/utils/diceSystem.js` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±—Ä–æ—Å–∫–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫
- `src/components/ui/InlineDiceRoll.js` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—Ä–æ—Å–∫–æ–≤
- `src/components/ui/InlineDiceRoll.css` - –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—Ä–æ—Å–∫–æ–≤

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**`performStatCheck(character, statName, difficulty, itemsData)`**
–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
```javascript
export function performStatCheck(character, statName, difficulty, itemsData) {
  const baseStat = character[statName] || 10;
  const petStatBonus = getPetStatBonus(character, statName, itemsData);
  const finalStat = getFinalStatValue(baseStat, petStatBonus);
  const modifier = getStatModifier(finalStat);
  
  const roll = rollD20();
  const petCubeBonus = getPetCubeBonus(character, itemsData);
  const total = roll + modifier + petCubeBonus;
  
  return {
    roll,
    modifier,
    petStatBonus,
    petCubeBonus,
    total,
    difficulty,
    success: total >= difficulty,
    criticalSuccess: roll === 20,
    criticalFailure: roll === 1,
    result: getResultType(total, difficulty, roll)
  };
}
```

**`getPetStatBonus(character, statName, itemsData)`**
–ü–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ –æ—Ç –ø–∏—Ç–æ–º—Ü–∞:
```javascript
export function getPetStatBonus(character, statName, itemsData) {
  if (!character?.petId || !itemsData?.items?.pet) {
    return 0;
  }
  
  const pet = itemsData.items.pet[character.petId];
  if (!pet?.special || pet.special.type !== 'stat') {
    return 0;
  }
  
  const statMapping = {
    'charisma': 'charisma',
    'cold': 'coldness',
    'sensitivity': 'sensitivity',
    'cunning': 'cunning',
    'courage': 'determination',
    'intelligence': 'intelligence'
  };
  
  return pet.special.stat_type === statMapping[statName] ? pet.special.bonus : 0;
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å `InventoryContext` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∑–µ–ª—å—è –≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–±—Ä–æ—Å–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `resurrection_potion`
- –°–ø–∏—Å–∞–Ω–∏–µ –∑–µ–ª—å—è –ø—Ä–∏ –ø–ª–∞—Ç–Ω–æ–º –ø–µ—Ä–µ–±—Ä–æ—Å–µ
- –£—á–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–µ—Ä–µ–±—Ä–æ—Å–æ–≤ –æ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤

#### –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è:
- –ë–∞–∑–æ–≤—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- ID –ø–∏—Ç–æ–º—Ü–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ:
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –±—Ä–æ—Å–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ–Ω—É—Å–æ–≤ –ø–∏—Ç–æ–º—Ü–µ–≤
- –°–ø–∏—Å–∞–Ω–∏–∏ –∑–µ–ª—å—è –≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ö–∞—Ä–∏–∑–º—ã
```json
{
  "id": "scene101",
  "chapterId": 6,
  "dialogue": [
    {
      "speaker": "nikolay",
      "text": "–ü–æ–ø—Ä–æ–±—É–π —É–≥–æ–≤–æ—Ä–∏—Ç—å –º–µ–Ω—è –¥–∞—Ç—å —Ç–µ–±–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ—Å–∫–æ–≤ –∫—É–±–∏–∫–æ–≤.",
      "emotion": "normal"
    }
  ],
  "choices": [
    {
      "text": "[–•–∞—Ä–∏–∑–º–∞] –£–±–µ–¥–∏—Ç—å –ù–∏–∫–æ–ª–∞—è –¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è",
      "diceCheck": {
        "stat": "charisma",
        "difficulty": 12,
        "description": "–£–±–µ–∂–¥–µ–Ω–∏–µ –ù–∏–∫–æ–ª–∞—è –¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è",
        "results": {
          "critical_success": "scene102",
          "success": "scene103",
          "failure": "scene104"
        }
      }
    }
  ]
}
```

#### –°—Ü–µ–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞
```json
{
  "id": "scene105",
  "chapterId": 6,
  "dialogue": [
    {
      "speaker": "nikolay",
      "text": "–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è —Ç–µ–±—è –Ω–µ–±–æ–ª—å—à—É—é –≥–æ–ª–æ–≤–æ–ª–æ–º–∫—É. –ü–æ–ø—Ä–æ–±—É–π —Ä–∞–∑–≥–∞–¥–∞—Ç—å –µ—ë!",
      "emotion": "normal"
    }
  ],
  "choices": [
    {
      "text": "[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ—à–∏—Ç—å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫—É",
      "diceCheck": {
        "stat": "intelligence",
        "difficulty": 14,
        "description": "–†–µ—à–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ –ù–∏–∫–æ–ª–∞—è",
        "results": {
          "critical_success": "scene106",
          "success": "scene107",
          "failure": "scene108"
        }
      }
    }
  ]
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
1. **–°–ª–æ–∂–Ω–æ—Å—Ç—å 5-8** - –õ–µ–≥–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å 9-12** - –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å 13-16** - –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å 17-20** - –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤

#### –î–∏–∑–∞–π–Ω –≤—ã–±–æ—Ä–æ–≤
1. **–í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É** - –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–±–æ—Ä –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è** - –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
3. **–ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è** - –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—é–∂–µ—Ç–æ–º
1. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫** - –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Å–∏—Ç—É–∞—Ü–∏–∏
2. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å—Ç–∏ —Å —Ä–∞–∑–≤–∏—Ç–∏–µ–º —Å—é–∂–µ—Ç–∞
3. **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –≤–µ—Å—Ç–∏ –∫ —Ä–∞–∑–Ω—ã–º —Å—Ü–µ–Ω–∞–º

### –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:', character);
console.log('–ü–∏—Ç–æ–º–µ—Ü:', character.petId);
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ—Å–∫–æ–≤
```javascript
// –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
const result = performStatCheck(character, 'charisma', 15, itemsData);
console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:', result);
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤ –ø–∏—Ç–æ–º—Ü–µ–≤
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–∞ –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ
const statBonus = getPetStatBonus(character, 'charisma', itemsData);
console.log('–ë–æ–Ω—É—Å –∫ —Ö–∞—Ä–∏–∑–º–µ –æ—Ç –ø–∏—Ç–æ–º—Ü–∞:', statBonus);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–∞ –∫ –±—Ä–æ—Å–∫—É
const cubeBonus = getPetCubeBonus(character, itemsData);
console.log('–ë–æ–Ω—É—Å –∫ –±—Ä–æ—Å–∫—É –æ—Ç –ø–∏—Ç–æ–º—Ü–∞:', cubeBonus);
```

## 5. –°–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–æ–º—Ü–µ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞–º –ø–æ–ª—É—á–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ü–∏—Ç–æ–º—Ü—ã –≤–ª–∏—è—é—Ç –Ω–∞ –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å —á–µ—Ä–µ–∑ –±–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º, –±—Ä–æ—Å–∫–∞–º –∫—É–±–∏–∫–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

### –¢–∏–ø—ã –ø–∏—Ç–æ–º—Ü–µ–≤

#### –ü–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
- **–û–±—ã—á–Ω—ã–µ (common)** - –±–∞–∑–æ–≤—ã–µ –ø–∏—Ç–æ–º—Ü—ã —Å –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
- **–†–µ–¥–∫–∏–µ (rare)** - –ø–∏—Ç–æ–º—Ü—ã —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
- **–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ (mythical)** - –æ—Å–æ–±—ã–µ –ø–∏—Ç–æ–º—Ü—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
- **–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ (legendary)** - —Å–∞–º—ã–µ –º–æ—â–Ω—ã–µ –ø–∏—Ç–æ–º—Ü—ã

#### –ü–æ —Ç–∏–ø—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- **–ë–æ–µ–≤—ã–µ** - –¥–∞—é—Ç –±–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–µ—Ä–µ–±—Ä–æ—Å—ã –∏ –±–æ–Ω—É—Å—ã –∫ –±—Ä–æ—Å–∫–∞–º
- **–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ** - —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –¥–æ—Ö–æ–¥—ã –∏ —Å–∫–∏–¥–∫–∏
- **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ** - —É–ª—É—á—à–∞—é—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞ –≤ items.json
```json
{
  "fairy": {
    "id": "fairy",
    "name": "–§–µ—è",
    "description": "–ú–∞–≥–∏—á–µ—Å–∫–æ–µ —Å—É—â–µ—Å—Ç–≤–æ",
    "type": "pet",
    "rarity": "mythical",
    "price": {
      "currency": "gems",
      "amount": 25
    },
    "sellPrice": 0,
    "canSell": false,
    "sprite": "sprites/items/pets/fairy.png",
    "scary": false,
    "can_get_in_scenes": true,
    "special": {
      "type": "stat",
      "stat_type": "charisma",
      "bonus": 2
    }
  }
}
```

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–∏—Ç–æ–º—Ü–µ–≤

#### –ë–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
```json
{
  "special": {
    "type": "stat",
    "stat_type": "charisma",
    "bonus": 2
  }
}
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- `charisma` - —Ö–∞—Ä–∏–∑–º–∞
- `coldness` - —Ö–æ–ª–æ–¥
- `sensitivity` - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- `cunning` - –∫–æ–≤–∞—Ä—Å—Ç–≤–æ
- `determination` - —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- `intelligence` - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç

#### –ë–æ–Ω—É—Å—ã –∫ –±—Ä–æ—Å–∫–∞–º –∫—É–±–∏–∫–æ–≤
```json
{
  "special": {
    "type": "cube",
    "modificator": 2
  }
}
```

#### –ü–µ—Ä–µ–±—Ä–æ—Å—ã –∫—É–±–∏–∫–æ–≤
```json
{
  "special": {
    "type": "reroll",
    "count": 1
  }
}
```

#### –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
```json
{
  "special": {
    "type": "relation",
    "increase": 25
  }
}
```

#### –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –±–æ–Ω—É—Å—ã
```json
{
  "special": {
    "type": "money",
    "increase": 50
  }
}
```

#### –°–∫–∏–¥–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
```json
{
  "special": {
    "type": "price",
    "value": 200
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–µ–≤

#### –î–∞—Ä–µ–Ω–∏–µ –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
–ü–∏—Ç–æ–º—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–¥–∞—Ä–µ–Ω—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –≤ –∑–Ω–∞–∫ –¥—Ä—É–∂–±—ã –∏–ª–∏ –∑–∞ –æ—Å–æ–±—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

```json
{
  "choices": [
    {
      "text": "–ü—Ä–∏–Ω—è—Ç—å –ø–∏—Ç–æ–º—Ü–∞",
      "nextScene": "scene132",
      "effects": {
        "items": {
          "add": ["fairy"]
        },
        "relationships": {
          "anna": 15
        }
      }
    }
  ]
}
```

#### –ü–æ–∫—É–ø–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
–ü–∏—Ç–æ–º—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∑–∞ –º–æ–Ω–µ—Ç—ã –∏–ª–∏ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–Ω–∏:

```json
{
  "fairy": {
    "price": {
      "currency": "gems",
      "amount": 25
    }
  }
}
```

#### –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
–ü–∏—Ç–æ–º—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–≥—Ä–∞–¥–æ–π –∑–∞:
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–ª–∞–≤
- –í–∞–∂–Ω—ã–µ –≤—ã–±–æ—Ä—ã
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–µ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö

#### –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Ç–µ–∫—Å—Ç–µ
–ü–∏—Ç–æ–º—Ü—ã –º–æ–≥—É—Ç —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è –≤ –¥–∏–∞–ª–æ–≥–∞—Ö —á–µ—Ä–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:

```json
{
  "dialogue": [
    {
      "speaker": "anna",
      "text": "–ö–∞–∫–æ–π –º–∏–ª—ã–π [PET_NAME]! –û–Ω —Ç–∞–∫–æ–π [PET_REACTION]!",
      "emotion": "happy"
    }
  ]
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:**
- `[PET_NAME]` - –∏–º—è –ø–∏—Ç–æ–º—Ü–∞
- `[PET_ABILITY]` - –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞
- `[PET_REACTION]` - —Ä–µ–∞–∫—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ –ø–∏—Ç–æ–º—Ü–∞

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∏—Ç–æ–º—Ü–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:

```javascript
const processDialogueText = (text, character) => {
  if (!text || !character) return text;
  
  let processedText = text;
  
  // –ó–∞–º–µ–Ω—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –ø–∏—Ç–æ–º—Ü–∞
  const petId = character.petId || character.pet?.id;
  const petName = character.petName || character.pet?.name;
  
  if (petId) {
    const pet = Object.values(itemsData.items.pet || {}).find(p => p.id === petId);
    if (pet) {
      const finalPetName = petName || pet.name;
      processedText = processedText.replace(/\[PET_NAME\]/g, finalPetName);
      processedText = processedText.replace(/\[PET_ABILITY\]/g, getPetSpecialText(pet));
      
      if (pet.scary) {
        processedText = processedText.replace(/\[PET_REACTION\]/g, '–∏—Å–ø—É–≥–∞–ª–∞—Å—å');
      } else {
        processedText = processedText.replace(/\[PET_REACTION\]/g, '—É–º–∏–ª–∏–ª–∞—Å—å');
      }
    }
  }
  
  return processedText;
};
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –±—Ä–æ—Å–∫–æ–≤ –∫—É–±–∏–∫–æ–≤

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–æ–Ω—É—Å—ã
–ü–∏—Ç–æ–º—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –±–æ–Ω—É—Å—ã –ø—Ä–∏ –±—Ä–æ—Å–∫–∞—Ö –∫—É–±–∏–∫–æ–≤:

```javascript
export function getPetStatBonus(character, statName, itemsData) {
  if (!character?.petId || !itemsData?.items?.pet) {
    return 0;
  }
  
  const pet = itemsData.items.pet[character.petId];
  if (!pet?.special || pet.special.type !== 'stat') {
    return 0;
  }
  
  const statMapping = {
    'charisma': 'charisma',
    'cold': 'coldness',
    'sensitivity': 'sensitivity',
    'cunning': 'cunning',
    'courage': 'determination',
    'intelligence': 'intelligence'
  };
  
  return pet.special.stat_type === statMapping[statName] ? pet.special.bonus : 0;
}
```

#### –ü–µ—Ä–µ–±—Ä–æ—Å—ã –∫—É–±–∏–∫–æ–≤
–ü–∏—Ç–æ–º—Ü—ã —Å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–±—Ä–æ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:

```javascript
export function getPetRerollCount(character, itemsData) {
  if (!character?.petId || !itemsData?.items?.pet) {
    return 0;
  }
  
  const pet = itemsData.items.pet[character.petId];
  if (!pet?.special || pet.special.type !== 'reroll') {
    return 0;
  }
  
  return pet.special.count || 0;
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞–º–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
```json
{
  "character": {
    "id": "player1",
    "name": "–ò–≥—Ä–æ–∫",
    "petId": "fairy",
    "petName": "–°–≤–µ—Ç–ª—è—á–æ–∫"
  }
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∏—Ç–æ–º—Ü–µ
```javascript
const getPetInfo = (character, itemsData) => {
  if (!character?.petId || !itemsData?.items?.pet) {
    return null;
  }
  
  return itemsData.items.pet[character.petId];
};
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–∏—Ç–æ–º—Ü–∞
```javascript
const hasPet = (character) => {
  return !!(character?.petId || character?.pet?.id);
};
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–∏—Ç–æ–º—Ü–∞—Ö

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–∏—Ç–æ–º—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- **–¢–µ–∫—Å—Ç**: "–ü–æ–ª—É—á–µ–Ω –ø–∏—Ç–æ–º–µ—Ü [–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞]"
- **–ò–∫–æ–Ω–∫–∞**: üêæ (–ª–∞–ø–∫–∞)
- **–¶–≤–µ—Ç**: –ó–µ–ª–µ–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø–∏—Ç–æ–º—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **–ë–æ–Ω—É—Å –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ**: "+2 –∫ —Ö–∞—Ä–∏–∑–º–µ –æ—Ç –ø–∏—Ç–æ–º—Ü–∞"
- **–ü–µ—Ä–µ–±—Ä–æ—Å –∫—É–±–∏–∫–∞**: "–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫"
- **–£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π**: "–ü–∏—Ç–æ–º–µ—Ü –ø–æ–º–æ–≥ —É–ª—É—á—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è"

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã
- `src/utils/petUtils.js` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∏—Ç–æ–º—Ü–∞–º–∏
- `src/utils/diceSystem.js` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –±—Ä–æ—Å–∫–æ–≤
- `src/components/screens/GameScreen.js` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**`getPetSpecialText(pet)`**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞:
```javascript
export function getPetSpecialText(pet) {
  if (!pet?.special) return '';
  
  switch (pet.special.type) {
    case 'stat':
      return `–¥–∞–µ—Ç +${pet.special.bonus} –∫ ${getStatName(pet.special.stat_type)}`;
    case 'cube':
      return `–¥–∞–µ—Ç +${pet.special.modificator} –∫ –±—Ä–æ—Å–∫–∞–º –∫—É–±–∏–∫–æ–≤`;
    case 'reroll':
      return `–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫ ${pet.special.count} —Ä–∞–∑`;
    case 'relation':
      return `—É–ª—É—á—à–∞–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞ +${pet.special.increase}`;
    case 'money':
      return `—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥—ã –Ω–∞ +${pet.special.increase}`;
    case 'price':
      return `–¥–∞–µ—Ç —Å–∫–∏–¥–∫—É ${pet.special.value} –º–æ–Ω–µ—Ç`;
    default:
      return '';
  }
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞
```json
{
  "id": "scene129",
  "chapterId": 7,
  "dialogue": [
    {
      "speaker": "anna",
      "text": "–ù–æ —è –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–¥–∞—Ä—é —Ç–µ–±–µ –ø–∏—Ç–æ–º—Ü–∞ - –≤–æ—Ç —Ç–µ–±–µ –æ–±—ã—á–Ω–∞—è –ö—Ä—ã—Å–∞!",
      "emotion": "happy"
    },
    {
      "speaker": "anna",
      "text": "–ö—Ä—ã—Å–∞ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —É–ª—É—á—à–∞—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞ +10 –æ—á–∫–æ–≤. –≠—Ç–æ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ!",
      "emotion": "normal"
    }
  ],
  "choices": [
    {
      "text": "–°–ø–∞—Å–∏–±–æ, —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ª—É—á—à–µ!",
      "nextScene": "scene132",
      "effects": {
        "items": {
          "add": ["rat"]
        },
        "relationships": {
          "anna": 5
        }
      }
    }
  ]
}
```

#### –°—Ü–µ–Ω–∞ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –ø–∏—Ç–æ–º—Ü–∞
```json
{
  "id": "scene130",
  "chapterId": 7,
  "dialogue": [
    {
      "speaker": "anna",
      "text": "–û, —É —Ç–µ–±—è –µ—Å—Ç—å [PET_NAME]! –ö–∞–∫–æ–π [PET_REACTION]!",
      "emotion": "surprised"
    },
    {
      "speaker": "anna",
      "text": "[PET_ABILITY]. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ!",
      "emotion": "happy"
    }
  ]
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### –î–∏–∑–∞–π–Ω –ø–∏—Ç–æ–º—Ü–µ–≤
1. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π** - –±–æ–ª–µ–µ —Ä–µ–¥–∫–∏–µ –ø–∏—Ç–æ–º—Ü—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–ª—å–Ω–µ–µ
2. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –ø–∏—Ç–æ–º–µ—Ü –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
3. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è** - –ø–∏—Ç–æ–º—Ü—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è —Å—é–∂–µ—Ç–∞

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—é–∂–µ—Ç–æ–º
1. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è** - –ø–∏—Ç–æ–º—Ü—ã –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å—Å—è –∑–∞ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
2. **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥–∏–∞–ª–æ–≥–∏** - –ø–∏—Ç–æ–º—Ü—ã –¥–æ–ª–∂–Ω—ã —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è –≤ –¥–∏–∞–ª–æ–≥–∞—Ö
3. **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã–±–æ—Ä–∞** - —Ä–∞–∑–Ω—ã–µ –ø–∏—Ç–æ–º—Ü—ã –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∏—Ç–æ–º—Ü–∞—Ö
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## 7. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–º–æ—Ü–∏–π

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —ç–º–æ—Ü–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã—Ä–∞–∂–∞—Ç—å —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏
- **normal** - –æ–±—ã—á–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- **happy** - —Å—á–∞—Å—Ç—å–µ
- **sad** - –≥—Ä—É—Å—Ç—å
- **angry** - –∑–ª–æ—Å—Ç—å
- **surprised** - —É–¥–∏–≤–ª–µ–Ω–∏–µ
- **smile1** - –ª–µ–≥–∫–∞—è —É–ª—ã–±–∫–∞
- **smile2** - —à–∏—Ä–æ–∫–∞—è —É–ª—ã–±–∫–∞
- **laugh** - —Å–º–µ—Ö
- **cry** - –ø–ª–∞—á
- **blush** - —Å–º—É—â–µ–Ω–∏–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö
```json
{
  "dialogue": [
    {
      "speaker": "dima",
      "text": "–ü—Ä–∏–≤–µ—Ç!",
      "emotion": "happy"
    }
  ]
}
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç–º–æ—Ü–∏–∏
–≠–º–æ—Ü–∏–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç:
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –£—Ä–æ–≤–Ω—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –ü—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–±–æ—Ä–æ–≤ –∏–≥—Ä–æ–∫–∞
- –í–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —ç–º–æ—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø—Ä–∏:
- –ü–µ—Ä–µ—Ö–æ–¥–µ –∫ –Ω–æ–≤–æ–º—É –¥–∏–∞–ª–æ–≥—É
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –°–æ–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤

## 8. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫—É –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö –µ–≥–æ –≤—ã–±–æ—Ä–æ–≤.

### –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
1. **relationship_positive** - –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
2. **relationship_negative** - –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π  
3. **important_choice** - —Å–æ–≤–µ—Ä—à–µ–Ω–∏–µ –≤–∞–∂–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
- **–ü–æ–∑–∏—Ü–∏—è**: –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π —É–≥–æ–ª —ç–∫—Ä–∞–Ω–∞
- **–ê–Ω–∏–º–∞—Ü–∏—è**: –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
- **–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è**: –ö–Ω–æ–ø–∫–∞ X

### –°—Ç–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω** —Å —Ä–∞–∑–º—ã—Ç–∏–µ–º
- **–¶–≤–µ—Ç–Ω—ã–µ –ø–æ–ª–æ—Å–∫–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
- **–ò–∫–æ–Ω–∫–∏**: –°–µ—Ä–¥—Ü–µ, —Ä–∞–∑–±–∏—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ, –∑–≤–µ–∑–¥–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `NotificationSystem` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `RelationshipsContext` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
- `InventoryContext` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
- `EpisodeManager` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–æ–≤ –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `SceneManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏—è–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- `DialogueItemSystem` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–û—Ç–Ω–æ—à–µ–Ω–∏—è**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- **–í–∞–∂–Ω—ã–µ –≤—ã–±–æ—Ä—ã**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —ç–ø–∏–∑–æ–¥–∞
- **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- **–≠–º–æ—Ü–∏–∏**: –í—ã—á–∏—Å–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- –≠–º–æ—Ü–∏–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –û—Ç–Ω–æ—à–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏/–∏–∑—ä—è—Ç–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–æ–≤ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ü–µ–Ω—ã

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞ —Å –≤–∞–∂–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
```json
{
  "id": "scene10",
  "dialogue": [
    {
      "speaker": "dima",
      "text": "–ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ–± —ç—Ç–æ–º?",
      "emotion": "normal"
    }
  ],
  "choices": [
    {
      "id": "support_dima",
      "text": "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –î–∏–º—É",
      "important": true,
      "value": "support",
      "effects": {
        "relationship": {
          "dima": 20
        }
      }
    },
    {
      "id": "criticize_dima", 
      "text": "–ü–æ–∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å",
      "important": true,
      "value": "criticize",
      "effects": {
        "relationship": {
          "dima": -15
        }
      }
    }
  ]
}
```

### –°—Ü–µ–Ω–∞ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
```json
{
  "id": "scene15",
  "requirements": {
    "relationship": {
      "dima": 50
    },
    "importantChoice": {
      "support_dima": "support"
    }
  },
  "dialogue": [
    {
      "speaker": "dima",
      "text": "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!",
      "emotion": "happy"
    }
  ]
}
```

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –∫–∞–∂–¥—ã–π —ç—Ñ—Ñ–µ–∫—Ç –¥–≤–∞–∂–¥—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π.

#### –ü—Ä–∏—á–∏–Ω–∞
–í `episodeManager.js` –±—ã–ª–æ –¥–≤–∞ –º–µ—Å—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:
- `case 'relationship':` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª `effects.relationship`
- `case 'relationships':` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª `effects.relationships`

–í —Å—Ü–µ–Ω–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç `"relationship"` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ), –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –µ–≥–æ –¥–≤–∞–∂–¥—ã.

#### –†–µ—à–µ–Ω–∏–µ
–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É:
```javascript
// –£–î–ê–õ–ï–ù–û –∏–∑ episodeManager.js:
case 'relationships':
  this.processRelationshipEffects(value);
  break;

// –û–°–¢–ê–í–õ–ï–ù–û:
case 'relationship':
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
  break;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–∞–∂–¥—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å –î–∏–º–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 50 –≤–º–µ—Å—Ç–æ 0.

#### –ü—Ä–∏—á–∏–Ω–∞
–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤—ã 3 –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"dima": 50` –≤ `chapter3/config.json`.

#### –†–µ—à–µ–Ω–∏–µ
–£–±—Ä–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```json
// –ë–´–õ–û:
"rewards": {
  "experience": 150,
  "coins": 75,
  "relationship": {
    "dima": 50
  }
}

// –°–¢–ê–õ–û:
"rewards": {
  "experience": 150,
  "coins": 75
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0.

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
`initializeRelationships` –≤—ã–∑—ã–≤–∞–ª—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π.

#### –ü—Ä–∏—á–∏–Ω–∞
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞.

#### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π:
```javascript
// –í RelationshipsContext.js
const hasExistingRelationships = Object.keys(existingRelationships).length > 0 && state.episodeId === episodeId;

if (hasExistingRelationships) {
  console.log('–û—Ç–Ω–æ—à–µ–Ω–∏—è —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º');
    return;
  }
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞.

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ `useEffect`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

#### –ü—Ä–∏—á–∏–Ω–∞
`useEffect` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

#### –†–µ—à–µ–Ω–∏–µ
–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `updateRelationship`:
```javascript
// –í RelationshipsContext.js
const updateRelationship = (characterId, targetId, type, value) => {
  // –°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ React
  dispatch({
    type: ACTION_TYPES.UPDATE_RELATIONSHIP,
    payload: { characterId, targetId, type, value }
  });
  
  // –ó–∞—Ç–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
  setTimeout(() => {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
  }, 0);
};
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

### 5. –ü—Ä–æ–±–ª–µ–º–∞ —Å —á—Ç–µ–Ω–∏–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
`getRelationship` —á–∏—Ç–∞–ª —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è React, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage.

#### –ü—Ä–∏—á–∏–Ω–∞
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

#### –†–µ—à–µ–Ω–∏–µ
–£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
```javascript
// –í RelationshipsContext.js
const getRelationship = (characterId, targetId, type) => {
  const relationshipKey = `${characterId}_${targetId}_${type}`;
  
  // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ React
  let relationship = state.relationships[relationshipKey];
  
  if (relationship) {
    return relationship.value;
}

  // –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤ localStorage
  try {
    const savedRelationships = localStorage.getItem('gameRelationships');
    if (savedRelationships) {
      const parsed = JSON.parse(savedRelationships);
      relationship = parsed.relationships[relationshipKey];
      
      if (relationship) {
        return relationship.value;
      }
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏–∑ localStorage:', error);
}
  
  return 0;
};
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

### 6. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π playerCharacterId

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–í `episodeManager.js` –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è `playerCharacterId`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π.

#### –ü—Ä–∏—á–∏–Ω–∞
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–∑–æ–≤–∞ `setPlayerCharacterId` –≤ `EpisodeManager`.

#### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É `playerCharacterId` –≤ `EpisodeManager`:
```javascript
// –í GameScreen.js
episodeManager.setPlayerCharacterId(playerCharacterId);

// –í EpisodeManager.js
setPlayerCharacterId(characterId) {
  if (this.episodeProgress) {
    this.episodeProgress.playerCharacterId = characterId;
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–≥—Ä–æ–∫–∞.

### 7. –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

#### –ü—Ä–∏—á–∏–Ω–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CSS
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `NotificationContext` –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

#### –†–µ—à–µ–Ω–∏–µ
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CSS:
```css
.notification-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
}
```

2. –î–æ–±–∞–≤–∏—Ç—å `NotificationContext` –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ `App.js`:
```javascript
import { NotificationProvider } from './contexts/NotificationContext';

function App() {
  return (
    <NotificationProvider>
      {/* –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã */}
    </NotificationProvider>
  );
      }
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –û—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ**: +10, +8, +12, +15, +5, +25 = 75
3. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ö–∞–∂–¥—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
5. **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–±–æ–µ–≤ –∏ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### 1. –û—Ç–ª–∞–¥–∫–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `getRelationship` –∏ `changeRelationship`
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤ localStorage
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤—ã–±–æ—Ä–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò–∑–±–µ–≥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –≤—ã–±–æ—Ä
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `getRelationship` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ—Ç–Ω–æ—à–µ–Ω–∏–π, —Ç–∞–∫ –∏ –ª–æ–∫–∞–ª—å–Ω—É—é
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –±—Ä–∞—É–∑–µ—Ä–∞—Ö

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º–µ—Ö–∞–Ω–∏–∫ –¥–∏–∞–ª–æ–≥–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –±–æ–≥–∞—Ç—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç, –≥–¥–µ –∫–∞–∂–¥—ã–π –≤—ã–±–æ—Ä –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–∞–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤, –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ —ç–º–æ—Ü–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–ª—É–±–æ–∫–∏–µ –∏ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–µ—Å—è —Å—é–∂–µ—Ç—ã.

–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏ —É–ª—É—á—à–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–µ—Ö–∞–Ω–∏–∫ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ. 